<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BAI 2 TUAN 8</title>
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <script src="../js/jquery-3.7.1.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
  
    <script>
        let sp1 = {hinhanh: "../hinh/pic1.png", dongia:100000, soluong: 2};
        let sp2 = {hinhanh: "../hinh/pic2.png", dongia:120000, soluong: 5};
        let sp3 = {hinhanh: "../hinh/pic3.png", dongia:150000, soluong: 8};
        let sp4 = {hinhanh: "../hinh/pic4.png", dongia:140000, soluong: 6};
        let sp5 = {hinhanh: "../hinh/pic5.png", dongia:200000, soluong: 3};
        let dssp = [sp1, sp2, sp3, sp4, sp5];
        let i = 0;
function napSanpham(sanpham, index){
    let tbl = document.getElementById("myTable");
    let row = "<tr>";
    row += "<td>"+(++i)+"</td>";
    row += "<td><img width='100'src="+sanpham.hinhanh+"></td>";
    row += "<td>"+sanpham.dongia+"</td>";
    row += "<td><input class='quantity' type='number' value='"+sanpham.soluong+"' onchange='tinhTongtien();'></td>";
    row += "<td>"+sanpham.soluong * sanpham.dongia+"</td>";
    row += "</tr>";
    let newRow = tbl.insertRow(tbl.rows.length);
    newRow.innerHTML = row;
}

function tinhTongtien(){
    let tbl = document.getElementById("myTable");
    let tongtien = 0;
    for(let i = 0; i < tbl.rows.length; i++){
        let dongia = tbl.rows[i].cells[2].innerHTML;
        let soluong = tbl.rows[i].cells[3].querySelector('input.quantity').value; 
        let thanhtien = dongia * soluong;
        tbl.rows[i].cells[4].innerHTML = thanhtien;
        tongtien += thanhtien;
    }
    document.getElementById("lblTongtien").innerHTML = tongtien;
}

window.onload = function(){
    dssp.forEach(napSanpham);
    tinhTongtien();

     
     let tbl = document.querySelector("table");
     let allCells = tbl.querySelectorAll("td, th");
 
     allCells.forEach(cell => {
         cell.style.border = "2px solid black"; 
         cell.style.textAlign = "left";
         cell.style.verticalAlign = "middle"; 

     });
 
     tbl.style.border = "2px solid black"; 
    let quantityInputs = document.querySelectorAll('.quantity');
     quantityInputs.forEach(input => {
         input.style.border = "1px solid black";
         input.style.padding = "1px"; 
         input.style.width = "80%";
         input.style.height = "30px";

     });
}
        </script>
        </head>
        <body>
            <div class="container mt-2">
                <div class="row">
                    <div class="col-12">
                        <table class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>STT</th>
                            <th>Hình ảnh</th>
                            <th>Đơn giá</th>
                            <th>Số lượng</th>
                            <th>Thành tiền</th>
                        </tr>
                    </thead>
                <tbody id="myTable">
                </tbody>
                    <tfoot>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td class="font-weight-bold">Tổng thành tiền</td>
                        <td class="font-weight-bold"><label
                id="lblTongtien"></label></td>
                                    </tr>
                                </tfoot>
                            </table>
                     </div>
                    </div>
                </div>
        </body>
        </html>